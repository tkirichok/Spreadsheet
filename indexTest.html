<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="reactive.js"></script>
    <title>Spreadsheet</title>
</head>
<body>
hello
</body>
<script type="application/javascript">
    var arr = ["dima","duren"]
    var a = $R.state(1);
    var b = $R.state(2);
    var nums = [[100,a],[1000,a,b]];
    tab = []
    for (var i = 0; i < 2; i ++){
        tab[i] = $R(function () {

            var s = arguments[0];
            for (var q = 1; q < arguments.length; q++){
                s = s + arguments[q];
            }

            return s
        });
        tab[i].bindTo.apply(tab[i], nums[i])
    }

    console.log(tab[0]())
    console.log(tab[1]())

    a.set(5)   // Set A to 5
    b.set(10)  // Set B to 10

    console.log(tab[0]())
    console.log(tab[1]())
    var data = [["name1", "city1", "some other info"], ["name2", "city2", "more info"]];
    var csvContent = "data:text/csv;charset=utf-8,";
    data.forEach(function(infoArray, index){

        dataString = infoArray.join(",");
        csvContent += index < data.length ? dataString+ "\n" : dataString;

    });
    console.log(csvContent)
    var encodedUri = encodeURI(csvContent);
    //window.open(encodedUri);

    //var encodedUri = encodeURI(csvContent);
    var link = document.createElement("a");
    link.setAttribute("href", encodedUri);
    link.setAttribute("download", "export.csv");

    link.click();
</script>
</html>